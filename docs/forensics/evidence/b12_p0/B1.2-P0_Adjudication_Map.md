# B1.2-P0 Adjudication Map

Generated from repository state.

## Contract Authority Surface
- Contract roots: `api-contracts/openapi/v1/*.yaml`
- Bundled artifacts used for adjudication: `api-contracts/dist/openapi/v1/*.bundled.yaml`
- Security schemes required by topology lock: `bearerAuth` (JWT) and `tenantKeyAuth` (webhook/HMAC)

## Auth Topology Inventory
- Total operations: **42**
- JWT-family operations: **18**
- JWT-family operations declaring `bearerAuth`: **18**
- Webhook-family operations: **15**
- Webhook operations declaring `tenantKeyAuth`: **15**
- Webhook operations declaring `bearerAuth` (must remain 0): **0**

## Canonical Error Surface Inventory
- Operations exposing `401` with `application/problem+json`: **37**
- Operations exposing `403` with `application/problem+json`: **22**

## Structural Diff Coverage (`oasdiff`)
- Comparison mode: `origin/main` bundled contracts vs PR bundled contracts
- Covered bundled families:
- `attribution.bundled.yaml`
- `auth.bundled.yaml`
- `export.bundled.yaml`
- `health.bundled.yaml`
- `llm-budget.bundled.yaml`
- `llm-explanations.bundled.yaml`
- `llm-investigations.bundled.yaml`
- `reconciliation.bundled.yaml`
- `revenue.bundled.yaml`
- `webhooks.paypal.bundled.yaml`
- `webhooks.shopify.bundled.yaml`
- `webhooks.stripe.bundled.yaml`
- `webhooks.woocommerce.bundled.yaml`

## CI Adjudication Surface
| Required Check | In Required Contexts Contract | Declared in CI Workflow |
|---|---|---|
| `Validate Contracts` | yes | yes |
| `Phase 1 Runtime Conformance` | yes | yes |
| `Phase 1 Negative Controls` | yes | yes |
| `JWT Tenant Context Invariants` | yes | yes |
| `Governance Guardrails` | no | yes |
| `Frontend Contract Consumption Gate` | yes | yes |

## Invariant-to-Job Mapping
- Contract topology + canonical 401/403 schema: `Phase 1 Runtime Conformance` (`tests/contract/test_contract_semantics.py`)
- Non-vacuous topology/error drift controls: `Phase 1 Negative Controls` (`scripts/contracts/run_negative_controls.sh`)
- JWT missing `tenant_id` and JWT->GUC checks: `JWT Tenant Context Invariants` (`tests/test_b060_phase1_auth_tenant.py`, `backend/tests/test_b07_p1_identity_guc.py`)
- Required-check merge lock enforcement: `Governance Guardrails` (`scripts/ci/enforce_required_status_checks.py`)
